<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Flawless : A simple Python framework to catch exceptions and report them via email" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Flawless</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/shopkick/flawless">View on GitHub</a>

          <h1 id="project_title">Flawless</h1>
          <h2 id="project_tagline">A simple Python framework to catch exceptions and report them via email</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/shopkick/flawless/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/shopkick/flawless/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Flawless</h1>

<p>Flawless is a simple Python framework developed at shopkick for detecting bugs in a production
environment. Flawless traps exceptions and then sends an email to the developer responsible
for causing the exception. Flawless integrates with git and uses git-blame to determine which
developer to email.</p>

<p>Project website: <a href="https://github.com/shopkick/flawless">https://github.com/shopkick/flawless</a></p>

<h2>How it Works</h2>

<p>The Flawless client wraps your code with a try/except block. When an exception is caught it then
sends the entire traceback to the Flawless server. The Flawless server then aggregates exception
reports from clients and figures out which line of code caused the exception. Once the line that
caused the exception is identified, Flawless runs "git blame" to determine the email address of
the developer that last touched that line of code. Flawless then sends the developer an email with
the traceback.</p>

<p>Exceptions can be whitelisted if they are expected. To whitelist an exception you must specify
the filename, function name, and the text from the line of code being whitelisted in the appropriate
config file. Alternatively, exception emails include a link to automatically add an exception to
the whitelist. It is possible to whitelist all exceptions from a particular function by leaving the
line of code text blank. Likewise, an entire file can be whitelisted by leaving the line of code and
function blank.</p>

<h2>4 Step Setup Guide</h2>

<ol>
<li>
<p>Install Flawless. After this step you should have an executable named flawless in your path.</p>

<p><code>$&gt; python setup.py install</code></p>
</li>
<li>
<p>Setup the Flawless server. Go to the server which you want to host the Flawless backend. Then
use the following command to start a short questionnaire to setup the server.</p>

<p><code>$&gt; flawless configure</code></p>
</li>
<li>
<p>Start the Flawless server</p>

<p><code>$&gt; flawless start -conf path/to/flawless.cfg</code></p>
</li>
<li><p>Integrate the Flawless client into your code. If you are running a WSGI application such as
django or pylons/pyramid, simply add the flawless.client.middleware to your application. Otherwise
you can wrap particular functions or entire classes by using flawless.client.decorators. View the
examples directory for some actual code examples.    </p></li>
</ol><blockquote>
<p>Tip: Edit flawless.client.default.py and set the default host:port for your Flawless server</p>
</blockquote>

<h2>Server User Interface</h2>

<p><strong>/get_weekly_error_report</strong> - Shows all errors that happened this week. Uses a leaderboard style format to show the developer responsible for causing the most errors.</p>

<pre><code>Parameters:
  timestamp (optional) - Specify which week you want to view. Default is the
                         current week.
  include_known_errors (optional) - Include errors from config/known_errors.
                                    Default is False.
</code></pre>

<p><strong>/check_health</strong> - Check if the server is up and running. Also displays server's configuration
parameters</p>

<p><strong>/add_known_error</strong> - Webpage in which you can whitelist errors</p>

<p><strong>/view_traceback</strong> - View the most recent traceback for a particular error</p>

<pre><code>Parameters:
  filename (required) - Specify the filename in which the error occurred
  function_name (required) - Specify the name of the function in which the
                             error occurred
  line_number (required) - Specify the line number on which the error
                           occurred
  text (required) - Specify the full text that appears on line_number
  timestamp (optional) - Specify which week you want to view. Default
                         is the current week.
</code></pre>

<h2>Configuration Files Reference</h2>

<p><strong>config/building_blocks:</strong> This is a list of library code functions that can raise an exception.
Adding an entry here causes the blame to be transferred to the caller of the library
rather than blaming the author of the library. See file for example.</p>

<pre><code>Fields:
  filename - The path to the file being whitelisted (not including
             the site-packages directory)
  function_name - The name of the function being whitelisted. This value
                  can be set to None to act as a wildcard.
  code_fragment - The actual text from the line of code being
                  whitelisted. This value can be set to None to act
                  as a wildcard.
</code></pre>

<p><strong>config/known_errors:</strong> This is a list of known errors that happen. Reporting can be customized to
completely ignore the error, to only alert after a minimum number of occurrences; or to alert every
N occurences. See file for example.</p>

<pre><code>Fields:
  filename - The path to the file being whitelisted (not including
             the site-packages directory)
  function_name - The name of the function being whitelisted. This
                  value can be set to None to act as a wildcard.
  code_fragment - The actual text from the line of code being
                  whitelisted. This value can be set to None to
                  act as a wildcard.
  min_alert_threshold - (optional) The minimum number of occurrences
                        before Flawless will report this error.
  max_alert_threshold - (optional) The maximum number of occurrences
                        before Flawless will stop reporting this error
  alert_every_n_occurences - (optional) Flawless will report this error
                             every N occurrences
  email_recipients - (optional) List of email addresses to include on
                     error reports for this error
  email_header - (optional) Extra text to place at the top of emails
                 for this error
</code></pre>

<p><strong>config/third_party_whitelist:</strong> This is a list of errors that can be generated by thirdparty
libraries that should be completely ignored (ex: network connection errors). See file for example.</p>

<pre><code>Fields:
  filename - The path to the file being whitelisted (not including
             the site-packages directory)
  function_name - The name of the function being whitelisted. This
                  value can be set to None to act as a wildcard.
  code_fragment - The actual text from the line of code being
                  whitelisted. This value can be set to None to act
                  as a wildcard
</code></pre>

<p><strong>config/watched_files:</strong> This file allows developers to receive all alerts for errors related to
a particular file. They can either register to receive any exception containing the file in the
stacktrace, or to only receive alerts when the file is blamed for the exception. See file for
example.</p>

<pre><code>Fields:
  email - Email address of the watcher
  filepath - The path to the file being watched
  watch_all_errors - If true, any exception that gets reported and
                     contains this file in it's traceback will be
                     sent to the watcher. If false, the watcher will
                     only receive reports for which a line in the file
                     was actually blamed for causing the error
</code></pre>

<p><strong>config/email_remapping:</strong> Remap a developer's email address that is returned by git-blame to
instead be mapped to a different email address. See file for example.</p>

<pre><code>Fields:
  remap - The email address that is being remapped
  to - The email address that should actually receive the
       error reports
</code></pre>

<p><strong>config/flawless.cfg:</strong> Contains all the configuration settings for the Flawless server. To view a
list of configuration options, run the following command.</p>

<pre><code>$&gt; flawless options
</code></pre>

<h3>Authors and Contributors</h3>

<p><a href="https://github.com/jwegan" class="user-mention">@jwegan</a></p>

<h3>Support or Contact</h3>

<p>Having trouble with Flawless? Check out the documentation or contact <a href="mailto:opensource@shopkick.com">opensource@shopkick.com</a> and weâ€™ll help you sort it out.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Flawless maintained by <a href="https://github.com/shopkick">shopkick</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36570089-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
